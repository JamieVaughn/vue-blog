<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React&#39;s useEffect as an &quot;Event Listener&quot; | yield ✴️ star</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/blog/logo.png">
    <meta name="description" content="Reacts useEffect can be taught like it is a special version of addEventListener for newcomers">
    <meta name="keywords" content="React useEffect Effects Events">
    
    <link rel="preload" href="/blog/assets/css/0.styles.c67855d6.css" as="style"><link rel="preload" href="/blog/assets/js/app.932232c1.js" as="script"><link rel="preload" href="/blog/assets/js/3.8550646b.js" as="script"><link rel="preload" href="/blog/assets/js/32.480b652b.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.f5860d56.js"><link rel="prefetch" href="/blog/assets/js/11.4588121a.js"><link rel="prefetch" href="/blog/assets/js/12.01c54b3d.js"><link rel="prefetch" href="/blog/assets/js/13.6a34ded9.js"><link rel="prefetch" href="/blog/assets/js/14.277f282a.js"><link rel="prefetch" href="/blog/assets/js/15.a0d2dc75.js"><link rel="prefetch" href="/blog/assets/js/16.89a94eb7.js"><link rel="prefetch" href="/blog/assets/js/17.519892bb.js"><link rel="prefetch" href="/blog/assets/js/18.3d771e11.js"><link rel="prefetch" href="/blog/assets/js/19.0433fa6b.js"><link rel="prefetch" href="/blog/assets/js/20.51a3885b.js"><link rel="prefetch" href="/blog/assets/js/21.b463ef51.js"><link rel="prefetch" href="/blog/assets/js/22.60bb997f.js"><link rel="prefetch" href="/blog/assets/js/23.b7171010.js"><link rel="prefetch" href="/blog/assets/js/24.3189f199.js"><link rel="prefetch" href="/blog/assets/js/25.31dbf87c.js"><link rel="prefetch" href="/blog/assets/js/26.efbd23ad.js"><link rel="prefetch" href="/blog/assets/js/27.4ec6cb07.js"><link rel="prefetch" href="/blog/assets/js/28.91247977.js"><link rel="prefetch" href="/blog/assets/js/29.52627f8e.js"><link rel="prefetch" href="/blog/assets/js/30.f513ae65.js"><link rel="prefetch" href="/blog/assets/js/31.8c8c008a.js"><link rel="prefetch" href="/blog/assets/js/33.4a080ab1.js"><link rel="prefetch" href="/blog/assets/js/4.1cc96e84.js"><link rel="prefetch" href="/blog/assets/js/5.b36e0487.js"><link rel="prefetch" href="/blog/assets/js/6.9dbbdcc8.js"><link rel="prefetch" href="/blog/assets/js/7.8d14461e.js"><link rel="prefetch" href="/blog/assets/js/8.0cbbb698.js"><link rel="prefetch" href="/blog/assets/js/9.33999d81.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.9f78e3e8.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.c67855d6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><script defer="defer">
  function recaptchaCallback(){
    var live = document.querySelector('#time');
    live.value = new Date();
    document.querySelector('[name=redirect_to]').value = (window || globalThis).location.href
    document.querySelector('section form input[type=submit]').removeAttribute('disabled');
  }
  function dismissJoin(e, str){
    if(str === 'success') {
      (window || globalThis).localStorage.setItem('joinedwjv', 'success')
    } else{
      return document.querySelector('#ContactMe').remove()
    }
  }
</script> <header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/logo.png" alt="yield ✴️ star" class="logo"> <span class="site-name can-hide">yield ✴️ star</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Menu</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">Home</a></li><li class="dropdown-item"><!----> <a href="/blog/posts/" class="nav-link router-link-active">Posts</a></li><li class="dropdown-item"><!----> <a href="/blog/archive/" class="nav-link">Archive</a></li><li class="dropdown-item"><!----> <a href="https://wjv.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Portfolio
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/jamievaughn/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Repo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Menu</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">Home</a></li><li class="dropdown-item"><!----> <a href="/blog/posts/" class="nav-link router-link-active">Posts</a></li><li class="dropdown-item"><!----> <a href="/blog/archive/" class="nav-link">Archive</a></li><li class="dropdown-item"><!----> <a href="https://wjv.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Portfolio
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/jamievaughn/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Repo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <!----> </div> <div class="blog" data-v-0a184ec8><section id="ContactMe" href="#ContactMe" data-v-7ae8b839 data-v-0a184ec8><form id="ajax-contact" method="post" action="https://getsimpleform.com/messages?form_api_token=8d73f78e270ace7eeda7529329d6a348" class="post" data-v-7ae8b839><input type="hidden" name="redirect_to" id="redirect" value="https://wjv.io/blog" data-v-7ae8b839> <input type="hidden" name="time" id="time" data-v-7ae8b839> <h3 data-v-7ae8b839>Join for updates by email! <span onclick="dismissJoin()" class="dismiss" data-v-7ae8b839>╳</span></h3> <div id="form-feedback" class="hidden" data-v-7ae8b839>Submitted successfully! Thank you! I'll be in touch shortly.</div> <input name="name" type="name" id="name" required="required" data-v-7ae8b839> <label for="name" class="name" data-v-7ae8b839>Your Name:</label> <input name="email" type="email" id="email" pattern=".+@+.+\.[a-z]{2,5}$" required="required" data-v-7ae8b839> <label for="email" class="email" data-v-7ae8b839>Your Email:</label> <div class="controls" data-v-7ae8b839><div data-sitekey="6Ldh-8kUAAAAAMYG8-BxodEZ4zxcn9uV8H4LKMOd" data-callback="recaptchaCallback" class="g-recaptcha" data-v-7ae8b839></div> <input type="submit" onsubmit="postMsg" onclick="dismissJoin(event, 'success')" disabled="disabled" data-v-7ae8b839></div></form> <script src="https://www.google.com/recaptcha/api.js" async="async" defer="defer" data-v-7ae8b839></script></section> <div class="blog__header" data-v-0a184ec8><p class="publish-date" data-v-0a184ec8><time datetime="2021-02-05T12:00:00.000Z" data-v-0a184ec8>February 5, 2021</time></p> <!----> <h1 class="blog__title" data-v-0a184ec8>React's useEffect as an &quot;Event Listener&quot;</h1></div> <div class="custom content__default" data-v-0a184ec8><p>React Hooks are amazing. I find they make it incredibly easy to modularize any piece of logic and then use it seemlessly anywhere in your app.</p> <p>One Hook in particular, <code>useEffect()</code> is extremely powerful, but it is also confusing especially to those learning a Javascript framework for the first time. I also sometimes hear of veteran React users lamenting the demise of React's life cycle methods and deriding <code>useEffect()</code> as a step backwards in some way from those.</p> <p>But I strongly disagree. The more that I use <code>useEffect()</code>, the more I think the whole concept of life cycle methods were a kludge that was leading us astray all along. On some days, I might even go so far as to say they are an anti-pattern.</p> <p>That might sound harsh, but let me explain.</p> <p>The life cycle methods (componentWillMount, componentWillUpdate, componentWillUnmount, etc.) trigger when a component life cycle reaches a certain point or time in the render cycle. This is really just a disguised equivalent to having hard-coded checkpoints in your code to give you an opportunity to make assertions or control flow statements and run some other logic depending on a condition. This is essentially a slightly more sophisticated form of Polling.</p> <p>But if we think about this, we ought never to really need to run code after some inflexible elapsed interval of time (i.e. a life-cycle point). That is what Polling does. On the contrary, what we NEED is to run code when a value changes. If we can set up some observer that notifies us of that change, then we can run that logic only when it is absolutely needed. This is what useEffect now grants us.</p> <p>Polling is discouraged these days for good reason, but it was at one time a common pattern in apps, before the days of callbacks. Callbacks were an improvement asynchronous processing that liberated developers from the terrible anti-pattern of Polling with <code>setTimeout()</code> or <code>setInterval()</code>. But callbacks quickly led to callback hell which is why it is also a kludge that has been supplanted by other, better asynchronous patterns like Promises and Async/Await.</p> <p>Similarly to callbacks, life cycle methods are a kludge to avoid the hell of having no way to listen to your app's internal state-change events for the purpose of notifying some other part of the app to execute some side effect. But, with <code>useEffect()</code> we now get an asynchronous pattern to help us manage that in a way that is on par with the introduction of Promises to better compose callbacks.</p> <p>With <code>useEffect()</code>, we essentially have an off-the-shelf <code>addEventListener()</code> where the event being listened to can be a change in any piece of app state that we want (i.e. whatever we put in the dependency array).</p> <p>So Promises let us sequentially tie an initiation of a callback to a trigger, independently of time. And <code>useEffect()</code> let's sequentially tie a callback to a change in a value of interest. You can think of this trigger as an &quot;app state event&quot;, which is no different conceptually to the browser events were familiar with like <code>&quot;click&quot;</code>, <code>&quot;mouseover&quot;</code>, <code>&quot;scroll&quot;</code>, etc. But now instead of a set number of listenable events provided to us from the browser, we can now listen to a change on any and every variable in our app.</p> <p>Consider if the authors of React had made the call signature of <code>useEffect()</code> more like <code>addEvenListener()</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">useEffectListener</span><span class="token punctuation">(</span><span class="token punctuation">[</span>foo<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// do side effects</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// do side effects</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Above our <code>useEffect()</code> Hook is rewritten slightly to look more like the familiar <code>addEventListener()</code> and its immediately clear the event being listened to is a change in <code>foo</code> after which it will run the function passed as the second parameter... just like with <code>addEventListener()</code>. Furthermore, since <code>foo</code> is in an array, the Hook's api probably affords us the opportunity to listen to multiple values simultaneously. Convenient! I think this Hook would be understood much more intuitively by developers coming from vanilla Javascript if it is thought of in this way.</p></div> <div class="page-edit" data-v-0a184ec8><!----> <!----></div> <!----> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.932232c1.js" defer></script><script src="/blog/assets/js/3.8550646b.js" defer></script><script src="/blog/assets/js/32.480b652b.js" defer></script>
  </body>
</html>
