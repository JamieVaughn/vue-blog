<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Simple State Reducer With Objects, Switch-Case &amp; Generators | yield ✴️ star</title>
    <meta name="description" content="Coding simple finite state machine manager/reducers in three ways">
    <link rel="icon" href="/blog/logo.png">
    <meta name="keywords" content="state reducer state management finite state machines">
    <link rel="preload" href="/blog/assets/css/0.styles.8f24c9d2.css" as="style"><link rel="preload" href="/blog/assets/js/app.ad5e6cf6.js" as="script"><link rel="preload" href="/blog/assets/js/6.b1f2f09e.js" as="script"><link rel="preload" href="/blog/assets/js/13.2a4bf383.js" as="script"><link rel="prefetch" href="/blog/assets/js/1.03ca884a.js"><link rel="prefetch" href="/blog/assets/js/10.8b345c16.js"><link rel="prefetch" href="/blog/assets/js/11.3987e475.js"><link rel="prefetch" href="/blog/assets/js/12.aad35e22.js"><link rel="prefetch" href="/blog/assets/js/14.4c525645.js"><link rel="prefetch" href="/blog/assets/js/15.17c1e421.js"><link rel="prefetch" href="/blog/assets/js/16.655e94bb.js"><link rel="prefetch" href="/blog/assets/js/17.73e7d05d.js"><link rel="prefetch" href="/blog/assets/js/18.76ad1acf.js"><link rel="prefetch" href="/blog/assets/js/19.0215aeda.js"><link rel="prefetch" href="/blog/assets/js/20.45145da5.js"><link rel="prefetch" href="/blog/assets/js/21.8219161d.js"><link rel="prefetch" href="/blog/assets/js/22.f31984fe.js"><link rel="prefetch" href="/blog/assets/js/23.c8dd5fb0.js"><link rel="prefetch" href="/blog/assets/js/24.ad62242c.js"><link rel="prefetch" href="/blog/assets/js/25.be4dff6b.js"><link rel="prefetch" href="/blog/assets/js/26.8c6a4895.js"><link rel="prefetch" href="/blog/assets/js/27.a56300c9.js"><link rel="prefetch" href="/blog/assets/js/4.5188c548.js"><link rel="prefetch" href="/blog/assets/js/5.c0758532.js"><link rel="prefetch" href="/blog/assets/js/7.8d8667ea.js"><link rel="prefetch" href="/blog/assets/js/8.fb7f93ae.js"><link rel="prefetch" href="/blog/assets/js/9.5d9a1d44.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.eacebb30.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.8f24c9d2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/logo.png" alt="yield ✴️ star" class="logo"> <span class="site-name can-hide">yield ✴️ star</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Menu</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">Home</a></li><li class="dropdown-item"><!----> <a href="/blog/posts/" class="nav-link router-link-active">Posts</a></li><li class="dropdown-item"><!----> <a href="/blog/archive/" class="nav-link">Archive</a></li><li class="dropdown-item"><!----> <a href="https://wjv.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Portfolio
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/jamievaughn/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Repo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Menu</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">Home</a></li><li class="dropdown-item"><!----> <a href="/blog/posts/" class="nav-link router-link-active">Posts</a></li><li class="dropdown-item"><!----> <a href="/blog/archive/" class="nav-link">Archive</a></li><li class="dropdown-item"><!----> <a href="https://wjv.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Portfolio
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/jamievaughn/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Repo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <!----> </div> <div class="blog" data-v-4035481b><div class="blog__header" data-v-4035481b><p class="publish-date" data-v-4035481b><time datetime="2019-12-28T20:47:18.000Z" data-v-4035481b>December 28, 2019</time></p> <p data-v-4035481b>Time to read: 2 min read</p> <h1 class="blog__title" data-v-4035481b>Simple State Reducer With Objects, Switch-Case &amp; Generators</h1></div> <div class="custom content__default" data-v-4035481b><p>Finite State Machines and State management is now an important part of frontend development. Libraries like Redux, XState and Microstates.js are creeping into wide spread use, especially in the React community. Those libraries provide a robust and complex solution to state management and are well suited to production applications. But for learning the concept of State Reducers and Finite State Management let's build a super simple <strong>State Reducer</strong> in three different ways:</p> <ul><li>Object Hashmap</li> <li>Switch-Case statement</li> <li>Generator function</li></ul> <p>A state reducer takes in a state and an action and returns a new state in a deterministic fashion. Its referred to as a reducer because it reduces two inputs into a single state as an output. The deterministic part of this meshes nicely with Functional programming, because it means it can be expressed with pure functions.</p> <h2 id="object-hashmap"><a href="#object-hashmap" aria-hidden="true" class="header-anchor">#</a> Object Hashmap</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> stateReducer <span class="token operator">=</span> <span class="token punctuation">{</span>
    current<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
    red<span class="token punctuation">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span>
    yellow<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
    green<span class="token punctuation">:</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span>
    next<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    getState<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="switch-case-statement"><a href="#switch-case-statement" aria-hidden="true" class="header-anchor">#</a> Switch-Case Statement</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">switch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'red'</span><span class="token punctuation">:</span>
        state <span class="token operator">=</span> <span class="token string">'green'</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'yellow'</span><span class="token punctuation">:</span>
        state <span class="token operator">=</span> <span class="token string">'red'</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'green'</span><span class="token punctuation">:</span>
        state <span class="token operator">=</span> <span class="token string">'yellow'</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> 
        state <span class="token operator">=</span> <span class="token string">'green'</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="generator-function"><a href="#generator-function" aria-hidden="true" class="header-anchor">#</a> Generator Function</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">stateReducer</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> states <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">]</span>
    <span class="token keyword">let</span> nextState <span class="token operator">=</span> <span class="token punctuation">(</span>states<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">3</span>
    <span class="token keyword">yield</span> states<span class="token punctuation">[</span>nextState<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token function">stateReducer</span><span class="token punctuation">(</span><span class="token string">'green'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// {value: &quot;yellow&quot;, done: false}</span>
</code></pre></div></div> <div class="page-edit" data-v-4035481b><!----> <!----></div> <!----> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.ad5e6cf6.js" defer></script><script src="/blog/assets/js/6.b1f2f09e.js" defer></script><script src="/blog/assets/js/13.2a4bf383.js" defer></script>
  </body>
</html>
